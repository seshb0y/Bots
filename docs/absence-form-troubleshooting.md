# Устранение неполадок - Формы отсутствия

## Проблема: "❌ Не удалось создать тикет для заявки об отсутствии!"

### Возможные причины и решения:

#### 1. **Недостаточные права бота**
**Проблема**: Бот не имеет прав на создание каналов
**Решение**: 
- Убедитесь, что у бота есть роль с правами `Manage Channels`
- Проверьте настройки ролей в Discord сервере
- Бот должен иметь права на создание каналов в категории

#### 2. **Ошибка InvalidType**
**Проблема**: Неправильный тип канала при создании
**Решение**: 
- Код уже исправлен для использования правильного типа `ChannelType.GuildText`
- Если проблема сохраняется, проверьте версию Discord.js

#### 3. **Fallback система**
**Автоматическое решение**: Если создание тикета не удается, система автоматически:
- Отправляет заявку в канал отсутствий `821790755486957579`
- Создает красивое embed сообщение с кнопками модерации
- Уведомляет пользователя об успешной отправке

### Логи для диагностики:

Проверьте логи бота в файле `logs/bot-YYYY-MM-DD.log`:

```bash
# Поиск ошибок создания тикетов
grep "Ошибка при создании тикета отсутствия" logs/bot-*.log

# Поиск успешных fallback операций
grep "Заявка отсутствия отправлена в канал (fallback)" logs/bot-*.log
```

### Проверка прав бота:

1. **Управление каналами**: `Manage Channels`
2. **Управление ролями**: `Manage Roles` 
3. **Отправка сообщений**: `Send Messages`
4. **Встраивание ссылок**: `Embed Links`
5. **Использование слэш-команд**: `Use Slash Commands`

### Тестирование:

1. Выполните команду `/absenceform`
2. Заполните форму отсутствия
3. Если тикет не создается, проверьте fallback в канале отсутствий
4. Проверьте логи на наличие ошибок

### Контакты для поддержки:

Если проблема не решается:
1. Проверьте логи бота
2. Убедитесь в наличии всех прав
3. Обратитесь к администраторам сервера
